{"version":3,"file":"index.js","sources":["../src/main.js"],"sourcesContent":["document.addEventListener('DOMContentLoaded', () => {\n  // 1. Инициализация иконок\n  lucide.createIcons();\n\n  // 2. Регистрация плагинов GSAP\n  gsap.registerPlugin(ScrollTrigger);\n\n  // 3. Плавный скролл (Lenis)\n  const lenis = new Lenis({\n      duration: 1.2,\n      easing: (t) => Math.min(1, 1.001 - Math.pow(2, -10 * t)),\n      smooth: true,\n      touchMultiplier: 2,\n  });\n\n  function raf(time) {\n      lenis.raf(time);\n      requestAnimationFrame(raf);\n  }\n  requestAnimationFrame(raf);\n\n  // 4. Логика мобильного меню (Исправленная)\n  const burger = document.querySelector('.header__burger');\n  const mobileMenu = document.querySelector('.mobile-menu');\n  const mobileMenuContent = document.querySelector('.mobile-menu__content');\n  const header = document.querySelector('.header');\n  const headerLinks = document.querySelectorAll('.header__link');\n  const body = document.body;\n\n  // Клонируем ссылки в мобильное меню\n  // Очищаем контент перед клонированием, чтобы не дублировалось при перезагрузках\n  mobileMenuContent.innerHTML = '';\n\n  headerLinks.forEach(link => {\n      const clone = link.cloneNode(true);\n      clone.classList.remove('header__link');\n      clone.classList.add('mobile-menu__link');\n      clone.addEventListener('click', toggleMenu);\n      mobileMenuContent.appendChild(clone);\n  });\n\n  function toggleMenu() {\n      const isActive = mobileMenu.classList.toggle('is-active');\n      burger.classList.toggle('is-active');\n      header.classList.toggle('menu-open');\n\n      if (isActive) {\n          lenis.stop();\n          body.style.overflow = 'hidden';\n      } else {\n          lenis.start();\n          body.style.overflow = '';\n      }\n  }\n\n  burger.addEventListener('click', toggleMenu);\n\n  // Скрытие хедера при скролле\n  let lastScroll = 0;\n  lenis.on('scroll', ({ scroll }) => {\n      if (header.classList.contains('menu-open')) return;\n\n      if (scroll > lastScroll && scroll > 100) {\n          header.classList.add('is-hidden');\n      } else {\n          header.classList.remove('is-hidden');\n      }\n      lastScroll = scroll;\n  });\n\n  // ==========================================\n  // 5. АНИМАЦИИ (ИСПРАВЛЕННАЯ ВЕРСИЯ)\n  // ==========================================\n\n  // 5.1 HERO СЕКЦИЯ (Timeline)\n  const heroTl = gsap.timeline({ defaults: { ease: \"power3.out\" } });\n\n  // Проверяем, есть ли элементы, чтобы не было ошибок на других страницах\n  if(document.querySelector('.block-reveal')) {\n      heroTl.from(\".block-reveal\", {\n          y: \"110%\",\n          duration: 1,\n          stagger: 0.15,\n          opacity: 0\n      })\n      .from(\".hero__desc\", { opacity: 0, y: 30, duration: 0.8 }, \"-=0.6\")\n      .from(\".hero__actions\", { opacity: 0, y: 30, duration: 0.8 }, \"-=0.6\")\n      .from(\".hero__visual\", { opacity: 0, scale: 0.8, duration: 1 }, \"-=0.8\");\n  }\n\n  // 5.2 ОБЩАЯ АНИМАЦИЯ ПОЯВЛЕНИЯ (fade-up)\n  // Используем querySelectorAll, чтобы найти ВСЕ элементы\n  const fadeElements = document.querySelectorAll('.gsap-up');\n\n  fadeElements.forEach((element) => {\n      // Читаем задержку из data-атрибута или ставим 0\n      const delay = element.dataset.delay || 0;\n\n      gsap.fromTo(element,\n          {\n              y: 50,\n              opacity: 0\n          },\n          {\n              y: 0,\n              opacity: 1,\n              duration: 0.8,\n              delay: delay,\n              ease: \"power2.out\",\n              scrollTrigger: {\n                  trigger: element,\n                  start: \"top 90%\", // Начинать, когда верх элемента на 90% высоты экрана\n                  toggleActions: \"play none none reverse\" // Проигрывать при появлении\n              }\n          }\n      );\n  });\n\n  // 5.3 АНИМАЦИЯ КАРТОЧЕК (gsap-card)\n  const cardElements = document.querySelectorAll('.gsap-card');\n\n  cardElements.forEach((card, index) => {\n      gsap.fromTo(card,\n          {\n              y: 60,\n              opacity: 0\n          },\n          {\n              y: 0,\n              opacity: 1,\n              duration: 0.6,\n              // Добавляем небольшую задержку для эффекта \"лесенки\" (stagger) внутри ряда\n              // index % 3 обеспечивает сброс задержки для каждого нового ряда (примерно)\n              delay: (index % 3) * 0.15,\n              ease: \"power2.out\",\n              scrollTrigger: {\n                  trigger: card,\n                  start: \"top 85%\",\n                  toggleActions: \"play none none reverse\"\n              }\n          }\n      );\n  });\n\n  // 5.4 ЭФФЕКТ МАСШТАБА ИЗОБРАЖЕНИЙ (gsap-scale)\n  const scaleElements = document.querySelectorAll('.gsap-scale');\n\n  scaleElements.forEach((el) => {\n      gsap.fromTo(el,\n          { scale: 0.9, opacity: 0.8 },\n          {\n              scale: 1,\n              opacity: 1,\n              ease: \"none\",\n              scrollTrigger: {\n                  trigger: el,\n                  start: \"top bottom\", // Когда верх элемента касается низа экрана\n                  end: \"center center\",\n                  scrub: 1 // Плавная привязка к скроллу\n              }\n          }\n      );\n  });\n\n  // 5.5 РИСУНОК В СЕКЦИИ INNOVATIONS\n  const drawingCircle = document.querySelector('.drawing-circle');\n  if (drawingCircle) {\n      gsap.to(drawingCircle, {\n          y: -50,\n          rotation: 90,\n          scrollTrigger: {\n              trigger: \".innovations\",\n              start: \"top bottom\",\n              end: \"bottom top\",\n              scrub: 1.5\n          }\n      });\n  }\n\n  // ==========================================\n  // 6. FAQ LOGIC (АККОРДЕОН)\n  // ==========================================\n  const faqItems = document.querySelectorAll('.faq-item');\n\n  faqItems.forEach(item => {\n      const question = item.querySelector('.faq-question');\n\n      question.addEventListener('click', () => {\n          const isOpen = item.classList.contains('active');\n\n          // Сначала закрываем все\n          faqItems.forEach(otherItem => {\n              otherItem.classList.remove('active');\n          });\n\n          // Если он не был открыт, открываем его\n          if (!isOpen) {\n              item.classList.add('active');\n          }\n      });\n  });\n\n // ==========================================\n    // 7. ФОРМА КОНТАКТОВ (СТРОГАЯ ВАЛИДАЦИЯ)\n    // ==========================================\n    const form = document.getElementById('contactForm');\n\n    if (form) {\n        const phoneInput = document.getElementById('phone');\n        const captchaLabel = document.getElementById('captchaLabel');\n        const captchaInput = document.getElementById('captchaInput');\n        const consentCheckbox = document.getElementById('consent'); // Получаем чекбокс\n        const formSuccess = document.getElementById('formSuccess');\n\n        // Только цифры для телефона\n        phoneInput.addEventListener('input', (e) => {\n            e.target.value = e.target.value.replace(/[^0-9+\\s]/g, '');\n        });\n\n        // Капча\n        let num1 = Math.floor(Math.random() * 10) + 1;\n        let num2 = Math.floor(Math.random() * 10) + 1;\n        captchaLabel.textContent = `Сколько будет ${num1} + ${num2}?`;\n\n        form.addEventListener('submit', (e) => {\n            e.preventDefault();\n            let isValid = true;\n\n            // 1. Очистка всех старых ошибок\n            form.querySelectorAll('.form-group').forEach(g => g.classList.remove('error'));\n            consentCheckbox.closest('.form-checkbox').classList.remove('error'); // Сброс ошибки чекбокса\n\n            // 2. Валидация текстовых полей\n            form.querySelectorAll('input[type=\"text\"], input[type=\"email\"], input[type=\"tel\"], input[type=\"number\"]').forEach(input => {\n                if (!input.value.trim()) {\n                    input.closest('.form-group').classList.add('error');\n                    isValid = false;\n                }\n            });\n\n            // 3. ВАЖНО: Строгая проверка чекбокса\n            if (!consentCheckbox.checked) {\n                consentCheckbox.closest('.form-checkbox').classList.add('error');\n                isValid = false;\n            }\n\n            // 4. Проверка капчи\n            if (parseInt(captchaInput.value) !== (num1 + num2)) {\n                captchaInput.closest('.form-group').classList.add('error');\n                isValid = false;\n            }\n\n            // Если всё верно — отправляем\n            if (isValid) {\n                const btn = form.querySelector('button[type=\"submit\"]');\n                const originalText = btn.textContent;\n\n                btn.textContent = 'Отправка...';\n                btn.disabled = true;\n\n                setTimeout(() => {\n                    formSuccess.classList.add('active');\n                    form.reset();\n                    btn.textContent = originalText;\n                    btn.disabled = false;\n\n                    // Новый пример для капчи\n                    num1 = Math.floor(Math.random() * 10) + 1;\n                    num2 = Math.floor(Math.random() * 10) + 1;\n                    captchaLabel.textContent = `Сколько будет ${num1} + ${num2}?`;\n\n                    // Убираем класс активного окна успеха через 5 сек (опционально)\n                    setTimeout(() => formSuccess.classList.remove('active'), 5000);\n                }, 1500);\n            }\n        });\n    \n  }\n});"],"names":["lenis","t","raf","time","burger","mobileMenu","mobileMenuContent","header","headerLinks","body","link","clone","toggleMenu","isActive","lastScroll","scroll","heroTl","element","delay","card","index","el","drawingCircle","faqItems","item","isOpen","otherItem","form","phoneInput","captchaLabel","captchaInput","consentCheckbox","formSuccess","e","num1","num2","isValid","g","input","btn","originalText"],"mappings":"0uBAAA,SAAS,iBAAiB,mBAAoB,IAAM,CAElD,OAAO,YAAa,EAGpB,KAAK,eAAe,aAAa,EAGjC,MAAMA,EAAQ,IAAI,MAAM,CACpB,SAAU,IACV,OAASC,GAAM,KAAK,IAAI,EAAG,MAAQ,KAAK,IAAI,EAAG,IAAMA,CAAC,CAAC,EACvD,OAAQ,GACR,gBAAiB,CACvB,CAAG,EAED,SAASC,EAAIC,EAAM,CACfH,EAAM,IAAIG,CAAI,EACd,sBAAsBD,CAAG,CAC/B,CACE,sBAAsBA,CAAG,EAGzB,MAAME,EAAS,SAAS,cAAc,iBAAiB,EACjDC,EAAa,SAAS,cAAc,cAAc,EAClDC,EAAoB,SAAS,cAAc,uBAAuB,EAClEC,EAAS,SAAS,cAAc,SAAS,EACzCC,EAAc,SAAS,iBAAiB,eAAe,EACvDC,EAAO,SAAS,KAItBH,EAAkB,UAAY,GAE9BE,EAAY,QAAQE,GAAQ,CACxB,MAAMC,EAAQD,EAAK,UAAU,EAAI,EACjCC,EAAM,UAAU,OAAO,cAAc,EACrCA,EAAM,UAAU,IAAI,mBAAmB,EACvCA,EAAM,iBAAiB,QAASC,CAAU,EAC1CN,EAAkB,YAAYK,CAAK,CACzC,CAAG,EAED,SAASC,GAAa,CAClB,MAAMC,EAAWR,EAAW,UAAU,OAAO,WAAW,EACxDD,EAAO,UAAU,OAAO,WAAW,EACnCG,EAAO,UAAU,OAAO,WAAW,EAE/BM,GACAb,EAAM,KAAM,EACZS,EAAK,MAAM,SAAW,WAEtBT,EAAM,MAAO,EACbS,EAAK,MAAM,SAAW,GAEhC,CAEEL,EAAO,iBAAiB,QAASQ,CAAU,EAG3C,IAAIE,EAAa,EACjBd,EAAM,GAAG,SAAU,CAAC,CAAE,OAAAe,CAAM,IAAO,CAC3BR,EAAO,UAAU,SAAS,WAAW,IAErCQ,EAASD,GAAcC,EAAS,IAChCR,EAAO,UAAU,IAAI,WAAW,EAEhCA,EAAO,UAAU,OAAO,WAAW,EAEvCO,EAAaC,EACnB,CAAG,EAOD,MAAMC,EAAS,KAAK,SAAS,CAAE,SAAU,CAAE,KAAM,YAAY,EAAI,EAG9D,SAAS,cAAc,eAAe,GACrCA,EAAO,KAAK,gBAAiB,CACzB,EAAG,OACH,SAAU,EACV,QAAS,IACT,QAAS,CACZ,CAAA,EACA,KAAK,cAAe,CAAE,QAAS,EAAG,EAAG,GAAI,SAAU,EAAG,EAAI,OAAO,EACjE,KAAK,iBAAkB,CAAE,QAAS,EAAG,EAAG,GAAI,SAAU,EAAG,EAAI,OAAO,EACpE,KAAK,gBAAiB,CAAE,QAAS,EAAG,MAAO,GAAK,SAAU,CAAG,EAAE,OAAO,EAKtD,SAAS,iBAAiB,UAAU,EAE5C,QAASC,GAAY,CAE9B,MAAMC,EAAQD,EAAQ,QAAQ,OAAS,EAEvC,KAAK,OAAOA,EACR,CACI,EAAG,GACH,QAAS,CACZ,EACD,CACI,EAAG,EACH,QAAS,EACT,SAAU,GACV,MAAOC,EACP,KAAM,aACN,cAAe,CACX,QAASD,EACT,MAAO,UACP,cAAe,wBACjC,CACA,CACO,CACP,CAAG,EAGoB,SAAS,iBAAiB,YAAY,EAE9C,QAAQ,CAACE,EAAMC,IAAU,CAClC,KAAK,OAAOD,EACR,CACI,EAAG,GACH,QAAS,CACZ,EACD,CACI,EAAG,EACH,QAAS,EACT,SAAU,GAGV,MAAQC,EAAQ,EAAK,IACrB,KAAM,aACN,cAAe,CACX,QAASD,EACT,MAAO,UACP,cAAe,wBACjC,CACA,CACO,CACP,CAAG,EAGqB,SAAS,iBAAiB,aAAa,EAE/C,QAASE,GAAO,CAC1B,KAAK,OAAOA,EACR,CAAE,MAAO,GAAK,QAAS,EAAK,EAC5B,CACI,MAAO,EACP,QAAS,EACT,KAAM,OACN,cAAe,CACX,QAASA,EACT,MAAO,aACP,IAAK,gBACL,MAAO,CACzB,CACA,CACO,CACP,CAAG,EAGD,MAAMC,EAAgB,SAAS,cAAc,iBAAiB,EAC1DA,GACA,KAAK,GAAGA,EAAe,CACnB,EAAG,IACH,SAAU,GACV,cAAe,CACX,QAAS,eACT,MAAO,aACP,IAAK,aACL,MAAO,GACrB,CACA,CAAO,EAML,MAAMC,EAAW,SAAS,iBAAiB,WAAW,EAEtDA,EAAS,QAAQC,GAAQ,CACJA,EAAK,cAAc,eAAe,EAE1C,iBAAiB,QAAS,IAAM,CACrC,MAAMC,EAASD,EAAK,UAAU,SAAS,QAAQ,EAG/CD,EAAS,QAAQG,GAAa,CAC1BA,EAAU,UAAU,OAAO,QAAQ,CACjD,CAAW,EAGID,GACDD,EAAK,UAAU,IAAI,QAAQ,CAEzC,CAAO,CACP,CAAG,EAKC,MAAMG,EAAO,SAAS,eAAe,aAAa,EAElD,GAAIA,EAAM,CACN,MAAMC,EAAa,SAAS,eAAe,OAAO,EAC5CC,EAAe,SAAS,eAAe,cAAc,EACrDC,EAAe,SAAS,eAAe,cAAc,EACrDC,EAAkB,SAAS,eAAe,SAAS,EACnDC,EAAc,SAAS,eAAe,aAAa,EAGzDJ,EAAW,iBAAiB,QAAUK,GAAM,CACxCA,EAAE,OAAO,MAAQA,EAAE,OAAO,MAAM,QAAQ,aAAc,EAAE,CACpE,CAAS,EAGD,IAAIC,EAAO,KAAK,MAAM,KAAK,OAAQ,EAAG,EAAE,EAAI,EACxCC,EAAO,KAAK,MAAM,KAAK,OAAQ,EAAG,EAAE,EAAI,EAC5CN,EAAa,YAAc,iBAAiBK,CAAI,MAAMC,CAAI,IAE1DR,EAAK,iBAAiB,SAAWM,GAAM,CACnCA,EAAE,eAAgB,EAClB,IAAIG,EAAU,GA2Bd,GAxBAT,EAAK,iBAAiB,aAAa,EAAE,QAAQU,GAAKA,EAAE,UAAU,OAAO,OAAO,CAAC,EAC7EN,EAAgB,QAAQ,gBAAgB,EAAE,UAAU,OAAO,OAAO,EAGlEJ,EAAK,iBAAiB,kFAAkF,EAAE,QAAQW,GAAS,CAClHA,EAAM,MAAM,SACbA,EAAM,QAAQ,aAAa,EAAE,UAAU,IAAI,OAAO,EAClDF,EAAU,GAE9B,CAAa,EAGIL,EAAgB,UACjBA,EAAgB,QAAQ,gBAAgB,EAAE,UAAU,IAAI,OAAO,EAC/DK,EAAU,IAIV,SAASN,EAAa,KAAK,IAAOI,EAAOC,IACzCL,EAAa,QAAQ,aAAa,EAAE,UAAU,IAAI,OAAO,EACzDM,EAAU,IAIVA,EAAS,CACT,MAAMG,EAAMZ,EAAK,cAAc,uBAAuB,EAChDa,EAAeD,EAAI,YAEzBA,EAAI,YAAc,cAClBA,EAAI,SAAW,GAEf,WAAW,IAAM,CACbP,EAAY,UAAU,IAAI,QAAQ,EAClCL,EAAK,MAAO,EACZY,EAAI,YAAcC,EAClBD,EAAI,SAAW,GAGfL,EAAO,KAAK,MAAM,KAAK,OAAQ,EAAG,EAAE,EAAI,EACxCC,EAAO,KAAK,MAAM,KAAK,OAAQ,EAAG,EAAE,EAAI,EACxCN,EAAa,YAAc,iBAAiBK,CAAI,MAAMC,CAAI,IAG1D,WAAW,IAAMH,EAAY,UAAU,OAAO,QAAQ,EAAG,GAAI,CAChE,EAAE,IAAI,CACvB,CACA,CAAS,CAET,CACA,CAAC"}